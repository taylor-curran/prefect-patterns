# Welcome to your prefect.yaml file! You can you this file for storing and managing
# configuration for deploying your flows. We recommend committing this file to source
# control along with your flow code.

# Generic metadata about this project
name: prefect-patterns
prefect-version: 2.10.17

# build section allows you to manage and build docker images
build:
- prefect.projects.steps.run_shell_script:
    id: get-commit-hash
    script: git rev-parse --short HEAD
    stream_output: false
- prefect_docker.deployments.steps.build_docker_image:
    requires: prefect-docker>=0.3.0
    image_name: taycurran/test-projects-june11
    tag: '{{ get-commit-hash.stdout }}'
    dockerfile: auto
    push: true

# push section allows you to manage if and how this project is uploaded to remote locations
push:

# pull section allows you to provide instructions for cloning this project in remote locations
pull:
- prefect.deployments.steps.git_clone:
    repository: https://github.com/taylor-curran/prefect-patterns.git
    branch: main

definitions:
  tags:
  - prefect-patterns
  - subflow-patterns

# the deployments section allows you to provide configuration for deploying flows
deployments:
- name: a-local-docker
  version:
  tags: []
  description:
  entrypoint: 
    flows/composite_flow_patterns/tasks_subflows_models/child_flows_sync.py:child_flow_a
  parameters: {}
  work_pool:
    name: local-docker
    work_queue_name:
    job_variables:
      image: '{{ image }}'
  schedule:
- name: b-local-docker
  version:
  tags: []
  description:
  entrypoint: 
    flows/composite_flow_patterns/tasks_subflows_models/child_flows_sync.py:child_flow_b
  parameters: {}
  work_pool:
    name: local-docker
    work_queue_name:
    job_variables:
      image: '{{ image }}'
  schedule:
- name: c-local-docker
  version:
  tags: []
  description:
  entrypoint: 
    flows/composite_flow_patterns/tasks_subflows_models/child_flows_sync.py:child_flow_c
  parameters: {}
  work_pool:
    name: local-docker
    work_queue_name:
    job_variables:
      image: '{{ image }}'
  schedule:
- name: d-local-docker
  version:
  tags: []
  description:
  entrypoint: 
    flows/composite_flow_patterns/tasks_subflows_models/child_flows_sync.py:child_flow_d
  parameters: {}
  work_pool:
    name: local-docker
    work_queue_name:
    job_variables:
      image: '{{ image }}'
  schedule:
- name: jtc-local-docker
  version:
  tags: []
  description:
  entrypoint: 
    flows/composite_flow_patterns/control_just_tasks_concurrent.py:just_tasks_concurrent
  parameters: {}
  work_pool:
    name: local-docker
    work_queue_name:
    job_variables:
      image: '{{ image }}'
  schedule:
- name: jts-local-docker
  version:
  tags: []
  description:
  entrypoint: flows/composite_flow_patterns/control_just_tasks_sync.py:just_tasks_sync
  parameters: {}
  work_pool:
    name: local-docker
    work_queue_name:
    job_variables:
      image: '{{ image }}'
  schedule:
- name: twd-local-docker
  version:
  tags: []
  description:
  entrypoint: 
    flows/composite_flow_patterns/task_wrapped_deployments.py:task_wrapped_deployments
  parameters: {}
  work_pool:
    name: local-docker
    work_queue_name:
    job_variables: {}
  schedule:
- name: agsf-local-docker
  version:
  tags: []
  description:
  entrypoint: 
    flows/composite_flow_patterns/asyncio_gather_subflows.py:asyncio_gather_sub_flows
  parameters: {}
  work_pool:
    name: local-docker
    work_queue_name:
    job_variables: {}
  schedule:
